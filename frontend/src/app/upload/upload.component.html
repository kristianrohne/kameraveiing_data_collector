<div class="upload-container">
  <main class="main-content">
    <div class="upload-section">
      <div class="upload-header">
        <h2>Last opp bilder</h2>
        <button type="button" class="veiledning-btn" (click)="goToIntro()">
          📖 Veiledning
        </button>
      </div>
      
      <div class="info-text">
        <p>Her kan du laste opp bilder av en eller flere griser. Legg til flere griser hvis du skal ta bilder av forskjellige griser.</p>
      </div>
      
      <!-- Simple single file upload -->
      <div class="pigs-container">
        <div *ngFor="let pig of pigs; let i = index" class="pig-section">
          <div class="pig-header">
            <h3>Gris {{ i + 1 }}</h3>
            <button 
              *ngIf="pigs.length > 1" 
              (click)="removePig(i)" 
              class="remove-pig-btn"
              type="button">
              ✕ Fjern
            </button>
          </div>
          <div class="pig-form">
            <div class="form-group">
              <label for="weight-{{i}}">Vekt (kg):</label>
              <input 
                type="number" 
                id="weight-{{i}}" 
                [(ngModel)]="pig.weight" 
                placeholder="f.eks. 75.5"
                min="1"
                max="400"
                step="0.1"
                class="form-input"
              >
            </div>
            <div class="file-input-container">
              <input 
                type="file" 
                id="fileInput-{{i}}" 
                multiple 
                accept="image/*" 
                (change)="onFileSelected($event, i)"
                class="file-input"
              >
              <label for="fileInput-{{i}}" class="file-input-label">
                📁 Velg bilder for gris {{ i + 1 }}
              </label>
            </div>
            <div *ngIf="pig.selectedFiles && pig.selectedFiles.length > 0" class="selected-files-preview">
              <p><strong>{{ pig.selectedFiles.length }}</strong> fil(er) valgt</p>
              <div class="file-list">
                <div *ngFor="let file of pig.selectedFiles" class="file-item">
                  {{ file.name }} ({{ (file.size / 1024 / 1024).toFixed(1) }} MB)
                </div>
              </div>
            </div>
          </div>
        </div>
        <button (click)="addPig()" class="add-pig-btn" type="button">
          ➕ Legg til enda en gris
        </button>
      </div>
  <!-- Only show selected files per pig below -->
      
      <!-- Upload Button -->
      <div class="upload-actions">
        <button 
          (click)="uploadFiles()" 
          [disabled]="uploading"
          class="upload-btn"
        >
          {{ uploading ? 'Laster opp...' : 'Last opp alle bilder' }}
        </button>
      </div>

  <!-- Removed progress bar -->

      <div *ngIf="uploadResults.length > 0" class="results">
        <h3>Resultater:</h3>
        <div class="results-list">
          <div *ngFor="let result of uploadResults" class="result-item">
            {{ result }}
          </div>
        </div>
        <button (click)="clearResults()" class="clear-btn">Tøm resultater</button>
      </div>
    </div>
  </main>
</div>
